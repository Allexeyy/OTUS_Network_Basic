**_Лабораторная работа №08._**

*Реализация DHCPv4*

ТОПОЛОГИЯ

![](../Lab_08/lab_08.jpg)

![](../Lab_08/lab_08_11.jpg)

# Задачи
    Часть 1. Создание сети и настройка основных параметров устройства
    Часть 2. Проверка назначения адреса SLAAC от R1
    Часть 3. Настройка и проверка сервера DHCPv6 без гражданства на R1
    Часть 4. Настройка и проверка состояния DHCPv6 сервера на R1
    Часть 5. Настройка и проверка DHCPv6 Relay на R2



-----------------------------------------------------

# Часть 1. Создание сети и настройка основных параметров устройства

1.1 - 1.3 Создали сеть согласно топологии
Базовая настройка роутера и коммутаторов на основве файла настроек.
Рекомендуется делать на окончательном этапе, чтобы часто не вводить пароли
Поменять: 

    hostname & ip domain-name 
соответствующие тому оборудованию на котором будет накатываться конфигурация

перед копированием и вставкой
Зайти в режим глобальной конфигурации

(config)# 

    service password-encryption
    !
    hostname S1
    !
    enable secret 5 $1$mERr$9cTjUIEqNGurQiFU.ZeCi1
    !
    no ip domain-lookup
    ip domain-name SW1
    !
    username admin secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
    !
    banner motd # Unauthorized access is prohibited! #
    !
    line con 0
     password 7 0822455D0A16
     login
     exec-timeout 5 0
     logging synchronous
    !
    line vty 0 4
     exec-timeout 5 0
     password 7 0822455D0A16
     login local
     transport input ssh
    line vty 5 15
     exec-timeout 5 0
     password 7 0822455D0A16
     login local
     transport input ssh
    !
    end

Выполнить комманды

    (config)# crypto key generate rsa general-keys modulus 1024
    (config)# ip ssh version 2
    #w
    #reload
Генерация ssh-ключа на основе локальных данных конфигурации, переключение на новую версию ssh, сохранение и перезагрузка обррудования.

1.4. Настройка интерфейсов и маршрутизации для обоих маршрутизаторов.

    R1(config)#ipv6 unicast-routing 
    R1(config)#int g0/0/1
    R1(config-if)#ipv6 enable 
    R1(config-if)#ipv6 address 2001:db8:acad:2::2/64
    R1(config-if)#ipv6 address fe80::1 link-local 
    R1(config-if)#no sh
    R1(config)#int g0/0/0
    R1(config-if)#ipv6 enable 
    R1(config-if)#ipv6 address 2001:db8:acad:2::1/64
    R1(config-if)#ipv6 address fe80::1 link-local 
    R1(config-if)#no sh
    R1(config)#ipv6 route ::/0 2001:db8:acad:2::2

    R2(config)#int g0/0/0
    R2(config-if)#ipv6 enable 
    R2(config-if)#ipv6 address 2001:db8:acad:2::2/64
    R2(config-if)#ipv6 address fe80::1 link-local 
    R2(config-if)#no sh
    R2(config)#int g0/0/1
    R2(config-if)#ipv6 enable 
    R2(config-if)#ipv6 address 2001:db8:acad:3::1/64
    R2(config-if)#ipv6 address fe80::1 link-local 
    R2(config-if)#no sh
    R2(config)#ipv6 route ::/0 2001:db8:acad:2::1

# Часть 2. Проверка назначения адреса SLAAC от R1
![](../Lab_08/lab_08_12.jpg)

Вопрос: Откуда взялась часть адреса с идентификатором хоста?
Ответ : Таковы особенности IPv6 маршрутизатор рахрешает системе самостоятельно генерировать идентификатор хоста.

# Часть 3. Настройка и проверка сервера DHCPv6 на R1

3.1. Более подробно изучите конфигурацию PC-A.

![](../Lab_08/lab_08_13.jpg)

3.2. Настройте R1 для предоставления DHCPv6 без состояния для PC-A.

    R1(config)#ipv6 dhcp pool R1-STATELESS
    R1(config-dhcpv6)#dns-server 2001:db8:acad::254
    R1(config-dhcpv6)#domain-name STATELESS.com
    R1(config-dhcpv6)#exit
    R1(config)#interface g0/0/1
    R1(config-if)#ipv6 nd other-config-flag 
    R1(config-if)#ipv6 dhcp server R1-STATELESS 

![](../Lab_08/lab_08_14.jpg)
![](../Lab_08/lab_08_16.jpg)

# Часть 4. Настройка сервера DHCPv6 с сохранением состояния на R1

    R1(config)#ipv6 dhcp pool R2-STATEFUL
    R1(config-dhcpv6)#address prefix 2001:db8:acad:3:aaa::/80
    R1(config-dhcpv6)#dns-server 2001:db8:acad::254
    R1(config-dhcpv6)#exit
    R1(config)#interface g0/0/0
    R1(config-if)#ipv6 dhcp server R2-STATEFUL

![](../Lab_08/lab_08_15.jpg)

# Часть 5. Настройка и проверка ретрансляции DHCPv6 на R2.
В части 5 необходимо настроить и проверить ретрансляцию DHCPv6 на R2, позволяя PC-B получать адрес IPv6. НО т.к. relay в этой версии ПО не работает - задание не выполнятся.


Файл схемы сети [здесь](Lab_08/lab_08_2.pkt).

- [Вернуться на основную страницу ](..readme.md)



